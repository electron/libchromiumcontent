# libchromiumcontent

Automatically builds and provides prebuilt binaries of [Chromium Content
module](http://www.chromium.org/developers/content-module) and all its
dependencies (e.g., Blink, V8, etc.).

## Development

### Prerequisites

* [Linux](https://chromium.googlesource.com/chromium/src/+/master/docs/linux_build_instructions_prerequisites.md)
* [Mac](https://chromium.googlesource.com/chromium/src/+/master/docs/mac_build_instructions.md#Prerequisites)
* [Windows](https://chromium.googlesource.com/chromium/src/+/master/docs/windows_build_instructions.md)

### One-time setup

    $ script/bootstrap

### Building

    $ script/update -t x64
    $ script/build -t x64

### Updating project files

If you change `VERSION` to point to a different Chromium release, or modify
`chromiumcontent.gyp{,i}`, you should run:

    $ script/update

This will regenerate all the project files. Then you can build again.

### Building for ARM target

```bash
$ ./script/bootstrap
$ ./script/update -t arm
$ cd vendor/chromium/src
$ ./build/install-build-deps.sh --arm
$ ./chrome/installer/linux/sysroot_scripts/install-debian.wheezy.sysroot.py --arch=arm
$ cd -
$ ./script/build -t arm
```

### Chrome 54 Upgrade

As a means of preserving history, here are some notes from the upgrade to Chrome 54.
This will describe building on Windows, but should extend to other platforms.

- Start all examples from `C:\src\` to avoid long path issues
- Install [depot_tools](https://www.chromium.org/developers/how-tos/install-depot-tools) and add it to your PATH
- Follow [Windows Chromium Setup](https://chromium.googlesource.com/chromium/src/+/master/docs/windows_build_instructions.md)
- rather than bootstrap by downloading the chromium tarball generated by
  [zcbenz/chromium-source-tarball](https://github.com/zcbenz/chromium-source-tarball)
  we checkout the chromium source with [depot_tools](https://www.chromium.org/developers/how-tos/install-depot-tools) using:

  ```
  > cd \src
  > git clone https://github.com/electron/libchromiumcontent.git
  > cd libchromiumcontent
  > fetch chromium
  > python script/update --no-download-source-tarball
  > python script/build
  ```
- electron (which you need to also clone) can be linked against this build with:

  ```
  > cd \src
  > git clone https://github.com/electron/electron.git
  > cd electron
  > python script\bootstrap.py ^
  --libcc_shared_library_path ../libchromiumcontent/src/out/component ^
  --libcc_static_library_path ../libchromiumcontent/src/out/static ^
  --libcc_source_path ../libchromiumcontent/src
  ```
